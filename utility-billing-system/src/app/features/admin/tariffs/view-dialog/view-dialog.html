<h2 mat-dialog-title>
  <mat-icon>description</mat-icon>
  Tariff Plan Details
</h2>

<mat-dialog-content>
  <div class="tariff-details">
    <!-- Basic Info -->
    <div class="detail-section">
      <h3>Basic Information</h3>
      <div class="detail-grid">
        <div class="detail-item">
          <label>Plan Name:</label>
          <span>{{tariff.planName}}</span>
        </div>
        <div class="detail-item">
          <label>Utility Type:</label>
          <span>{{tariff.utilityTypeName || 'N/A'}}</span>
        </div>
        <div class="detail-item">
          <label>Type:</label>
          <span class="type-badge" [class.slab]="tariff.isSlabBased">
            {{tariff.isSlabBased ? 'Slab-Based' : 'Flat Rate'}}
          </span>
        </div>
        <div class="detail-item">
          <label>Effective From:</label>
          <span>{{tariff.effectiveFrom | date:'dd MMM yyyy'}}</span>
        </div>
        <div class="detail-item">
          <label>Status:</label>
          <span class="status-badge" [class.active]="tariff.isActive">
            {{tariff.isActive ? 'Active' : 'Inactive'}}
          </span>
        </div>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Charges -->
    <div class="detail-section">
      <h3>Charges & Taxes</h3>
      <div class="charges-grid">
        <div class="charge-card">
          <mat-icon>account_balance_wallet</mat-icon>
          <label>Fixed Monthly Charge</label>
          <span class="amount">₹{{tariff.fixedMonthlyCharge | number:'1.2-2'}}</span>
        </div>
        <div class="charge-card">
          <mat-icon>attach_money</mat-icon>
          <label>Minimum Charge</label>
          <span class="amount">₹{{tariff.minimumCharge | number:'1.2-2'}}</span>
        </div>
        <div class="charge-card">
          <mat-icon>percent</mat-icon>
          <label>Tax Percentage</label>
          <span class="amount">{{tariff.taxPercentage}}%</span>
        </div>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Tariff Slabs -->
    <div class="detail-section" *ngIf="tariff.tariffSlabs && tariff.tariffSlabs.length > 0">
      <h3>Tariff Slabs</h3>
      <table mat-table [dataSource]="tariff.tariffSlabs" class="slabs-table">
        <ng-container matColumnDef="slabNumber">
          <th mat-header-cell *matHeaderCellDef> Slab </th>
          <td mat-cell *matCellDef="let slab">
            <span class="slab-number">Slab {{slab.slabNumber}}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="range">
          <th mat-header-cell *matHeaderCellDef> Unit Range </th>
          <td mat-cell *matCellDef="let slab">
            {{getSlabRange(slab.fromUnit, slab.toUnit)}}
          </td>
        </ng-container>

        <ng-container matColumnDef="ratePerUnit">
          <th mat-header-cell *matHeaderCellDef> Rate per Unit </th>
          <td mat-cell *matCellDef="let slab">
            <span class="rate">₹{{slab.ratePerUnit | number:'1.2-2'}}</span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-raised-button color="primary" (click)="onClose()">
    <mat-icon>close</mat-icon>
    Close
  </button>
</mat-dialog-actions>